{"version":3,"file":"debug.umd.js","sources":["../src/check-props.js","../src/component-stack.js","../src/debug.js","../src/constants.js","../src/util.js"],"sourcesContent":["const ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\r\n\r\nlet loggedTypeFailures = {};\r\n\r\n/**\r\n * Reset the history of which prop type warnings have been logged.\r\n */\r\nexport function resetPropWarnings() {\r\n\tloggedTypeFailures = {};\r\n}\r\n\r\n/**\r\n * Assert that the values match with the type specs.\r\n * Error messages are memorized and will only be shown once.\r\n *\r\n * Adapted from https://github.com/facebook/prop-types/blob/master/checkPropTypes.js\r\n *\r\n * @param {object} typeSpecs Map of name to a ReactPropType\r\n * @param {object} values Runtime values that need to be type-checked\r\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\r\n * @param {string} componentName Name of the component for error messages.\r\n * @param {?Function} getStack Returns the component stack.\r\n */\r\nexport function checkPropTypes(\r\n\ttypeSpecs,\r\n\tvalues,\r\n\tlocation,\r\n\tcomponentName,\r\n\tgetStack\r\n) {\r\n\tObject.keys(typeSpecs).forEach(typeSpecName => {\r\n\t\tlet error;\r\n\t\ttry {\r\n\t\t\terror = typeSpecs[typeSpecName](\r\n\t\t\t\tvalues,\r\n\t\t\t\ttypeSpecName,\r\n\t\t\t\tcomponentName,\r\n\t\t\t\tlocation,\r\n\t\t\t\tnull,\r\n\t\t\t\tReactPropTypesSecret\r\n\t\t\t);\r\n\t\t} catch (e) {\r\n\t\t\terror = e;\r\n\t\t}\r\n\t\tif (error && !(error.message in loggedTypeFailures)) {\r\n\t\t\tloggedTypeFailures[error.message] = true;\r\n\t\t\tconsole.error(\r\n\t\t\t\t`Failed ${location} type: ${error.message}${(getStack &&\r\n\t\t\t\t\t`\\n${getStack()}`) ||\r\n\t\t\t\t\t''}`\r\n\t\t\t);\r\n\t\t}\r\n\t});\r\n}\r\n","import { options, Fragment } from 'preact';\r\n\r\n/**\r\n * Get human readable name of the component/dom node\r\n * @param {import('./internal').VNode} vnode\r\n * @param {import('./internal').VNode} vnode\r\n * @returns {string}\r\n */\r\nexport function getDisplayName(vnode) {\r\n\tif (vnode.type === Fragment) {\r\n\t\treturn 'Fragment';\r\n\t} else if (typeof vnode.type == 'function') {\r\n\t\treturn vnode.type.displayName || vnode.type.name;\r\n\t} else if (typeof vnode.type == 'string') {\r\n\t\treturn vnode.type;\r\n\t}\r\n\r\n\treturn '#text';\r\n}\r\n\r\n/**\r\n * Used to keep track of the currently rendered `vnode` and print it\r\n * in debug messages.\r\n */\r\nlet renderStack = [];\r\n\r\n/**\r\n * Keep track of the current owners. An owner describes a component\r\n * which was responsible to render a specific `vnode`. This exclude\r\n * children that are passed via `props.children`, because they belong\r\n * to the parent owner.\r\n *\r\n * ```jsx\r\n * const Foo = props => <div>{props.children}</div> // div's owner is Foo\r\n * const Bar = props => {\r\n *   return (\r\n *     <Foo><span /></Foo> // Foo's owner is Bar, span's owner is Bar\r\n *   )\r\n * }\r\n * ```\r\n *\r\n * Note: A `vnode` may be hoisted to the root scope due to compiler\r\n * optimiztions. In these cases the `_owner` will be different.\r\n */\r\nlet ownerStack = [];\r\n\r\n/**\r\n * Get the currently rendered `vnode`\r\n * @returns {import('./internal').VNode | null}\r\n */\r\nexport function getCurrentVNode() {\r\n\treturn renderStack.length > 0 ? renderStack[renderStack.length - 1] : null;\r\n}\r\n\r\n/**\r\n * If the user doesn't have `@babel/plugin-transform-react-jsx-source`\r\n * somewhere in his tool chain we can't print the filename and source\r\n * location of a component. In that case we just omit that, but we'll\r\n * print a helpful message to the console, notifying the user of it.\r\n */\r\nlet hasBabelPlugin = false;\r\n\r\n/**\r\n * Check if a `vnode` is a possible owner.\r\n * @param {import('./internal').VNode} vnode\r\n */\r\nfunction isPossibleOwner(vnode) {\r\n\treturn typeof vnode.type == 'function' && vnode.type != Fragment;\r\n}\r\n\r\n/**\r\n * Return the component stack that was captured up to this point.\r\n * @param {import('./internal').VNode} vnode\r\n * @returns {string}\r\n */\r\nexport function getOwnerStack(vnode) {\r\n\tconst stack = [vnode];\r\n\tlet next = vnode;\r\n\twhile (next._owner != null) {\r\n\t\tstack.push(next._owner);\r\n\t\tnext = next._owner;\r\n\t}\r\n\r\n\treturn stack.reduce((acc, owner) => {\r\n\t\tacc += `  in ${getDisplayName(owner)}`;\r\n\r\n\t\tconst source = owner.__source;\r\n\t\tif (source) {\r\n\t\t\tacc += ` (at ${source.fileName}:${source.lineNumber})`;\r\n\t\t} else if (!hasBabelPlugin) {\r\n\t\t\thasBabelPlugin = true;\r\n\t\t\tconsole.warn(\r\n\t\t\t\t'Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.'\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (acc += '\\n');\r\n\t}, '');\r\n}\r\n\r\n/**\r\n * Setup code to capture the component trace while rendering. Note that\r\n * we cannot simply traverse `vnode._parent` upwards, because we have some\r\n * debug messages for `this.setState` where the `vnode` is `undefined`.\r\n */\r\nexport function setupComponentStack() {\r\n\tlet oldDiff = options._diff;\r\n\tlet oldDiffed = options.diffed;\r\n\tlet oldRoot = options._root;\r\n\tlet oldVNode = options.vnode;\r\n\tlet oldRender = options._render;\r\n\r\n\toptions.diffed = vnode => {\r\n\t\tif (isPossibleOwner(vnode)) {\r\n\t\t\townerStack.pop();\r\n\t\t}\r\n\t\trenderStack.pop();\r\n\t\tif (oldDiffed) oldDiffed(vnode);\r\n\t};\r\n\r\n\toptions._diff = vnode => {\r\n\t\tif (isPossibleOwner(vnode)) {\r\n\t\t\trenderStack.push(vnode);\r\n\t\t}\r\n\t\tif (oldDiff) oldDiff(vnode);\r\n\t};\r\n\r\n\toptions._root = (vnode, parent) => {\r\n\t\townerStack = [];\r\n\t\tif (oldRoot) oldRoot(vnode, parent);\r\n\t};\r\n\r\n\toptions.vnode = vnode => {\r\n\t\tvnode._owner =\r\n\t\t\townerStack.length > 0 ? ownerStack[ownerStack.length - 1] : null;\r\n\t\tif (oldVNode) oldVNode(vnode);\r\n\t};\r\n\r\n\toptions._render = vnode => {\r\n\t\tif (isPossibleOwner(vnode)) {\r\n\t\t\townerStack.push(vnode);\r\n\t\t}\r\n\r\n\t\tif (oldRender) oldRender(vnode);\r\n\t};\r\n}\r\n","import { checkPropTypes } from './check-props';\r\nimport { options, Component } from 'preact';\r\nimport {\r\n\tELEMENT_NODE,\r\n\tDOCUMENT_NODE,\r\n\tDOCUMENT_FRAGMENT_NODE\r\n} from './constants';\r\nimport {\r\n\tgetOwnerStack,\r\n\tsetupComponentStack,\r\n\tgetCurrentVNode,\r\n\tgetDisplayName\r\n} from './component-stack';\r\nimport { assign } from './util';\r\n\r\nconst isWeakMapSupported = typeof WeakMap == 'function';\r\n\r\nfunction getClosestDomNodeParent(parent) {\r\n\tif (!parent) return {};\r\n\tif (typeof parent.type == 'function') {\r\n\t\treturn getClosestDomNodeParent(parent._parent);\r\n\t}\r\n\treturn parent;\r\n}\r\n\r\nexport function initDebug() {\r\n\tsetupComponentStack();\r\n\r\n\tlet hooksAllowed = false;\r\n\r\n\t/* eslint-disable no-console */\r\n\tlet oldBeforeDiff = options._diff;\r\n\tlet oldDiffed = options.diffed;\r\n\tlet oldVnode = options.vnode;\r\n\tlet oldCatchError = options._catchError;\r\n\tlet oldRoot = options._root;\r\n\tlet oldHook = options._hook;\r\n\tconst warnedComponents = !isWeakMapSupported\r\n\t\t? null\r\n\t\t: {\r\n\t\t\t\tuseEffect: new WeakMap(),\r\n\t\t\t\tuseLayoutEffect: new WeakMap(),\r\n\t\t\t\tlazyPropTypes: new WeakMap()\r\n\t\t  };\r\n\tconst deprecations = [];\r\n\r\n\toptions._catchError = (error, vnode, oldVNode) => {\r\n\t\tlet component = vnode && vnode._component;\r\n\t\tif (component && typeof error.then == 'function') {\r\n\t\t\tconst promise = error;\r\n\t\t\terror = new Error(\r\n\t\t\t\t`Missing Suspense. The throwing component was: ${getDisplayName(vnode)}`\r\n\t\t\t);\r\n\r\n\t\t\tlet parent = vnode;\r\n\t\t\tfor (; parent; parent = parent._parent) {\r\n\t\t\t\tif (parent._component && parent._component._childDidSuspend) {\r\n\t\t\t\t\terror = promise;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// We haven't recovered and we know at this point that there is no\r\n\t\t\t// Suspense component higher up in the tree\r\n\t\t\tif (error instanceof Error) {\r\n\t\t\t\tthrow error;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\toldCatchError(error, vnode, oldVNode);\r\n\r\n\t\t\t// when an error was handled by an ErrorBoundary we will nontheless emit an error\r\n\t\t\t// event on the window object. This is to make up for react compatibility in dev mode\r\n\t\t\t// and thus make the Next.js dev overlay work.\r\n\t\t\tif (typeof error.then != 'function') {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthrow error;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t};\r\n\r\n\toptions._root = (vnode, parentNode) => {\r\n\t\tif (!parentNode) {\r\n\t\t\tthrow new Error(\r\n\t\t\t\t'Undefined parent passed to render(), this is the second argument.\\n' +\r\n\t\t\t\t\t'Check if the element is available in the DOM/has the correct id.'\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet isValid;\r\n\t\tswitch (parentNode.nodeType) {\r\n\t\t\tcase ELEMENT_NODE:\r\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\r\n\t\t\tcase DOCUMENT_NODE:\r\n\t\t\t\tisValid = true;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tisValid = false;\r\n\t\t}\r\n\r\n\t\tif (!isValid) {\r\n\t\t\tlet componentName = getDisplayName(vnode);\r\n\t\t\tthrow new Error(\r\n\t\t\t\t`Expected a valid HTML node as a second argument to render.\tReceived ${parentNode} instead: render(<${componentName} />, ${parentNode});`\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (oldRoot) oldRoot(vnode, parentNode);\r\n\t};\r\n\r\n\toptions._diff = vnode => {\r\n\t\tlet { type, _parent: parent } = vnode;\r\n\t\tlet parentVNode = getClosestDomNodeParent(parent);\r\n\r\n\t\thooksAllowed = true;\r\n\r\n\t\tif (type === undefined) {\r\n\t\t\tthrow new Error(\r\n\t\t\t\t'Undefined component passed to createElement()\\n\\n' +\r\n\t\t\t\t\t'You likely forgot to export your component or might have mixed up default and named imports' +\r\n\t\t\t\t\tserializeVNode(vnode) +\r\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\r\n\t\t\t);\r\n\t\t} else if (type != null && typeof type == 'object') {\r\n\t\t\tif (type._children !== undefined && type._dom !== undefined) {\r\n\t\t\t\tthrow new Error(\r\n\t\t\t\t\t`Invalid type passed to createElement(): ${type}\\n\\n` +\r\n\t\t\t\t\t\t'Did you accidentally pass a JSX literal as JSX twice?\\n\\n' +\r\n\t\t\t\t\t\t`  let My${getDisplayName(vnode)} = ${serializeVNode(type)};\\n` +\r\n\t\t\t\t\t\t`  let vnode = <My${getDisplayName(vnode)} />;\\n\\n` +\r\n\t\t\t\t\t\t'This usually happens when you export a JSX literal and not the component.' +\r\n\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tthrow new Error(\r\n\t\t\t\t'Invalid type passed to createElement(): ' +\r\n\t\t\t\t\t(Array.isArray(type) ? 'array' : type)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\t(type === 'thead' || type === 'tfoot' || type === 'tbody') &&\r\n\t\t\tparentVNode.type !== 'table'\r\n\t\t) {\r\n\t\t\tconsole.error(\r\n\t\t\t\t'Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent.' +\r\n\t\t\t\t\tserializeVNode(vnode) +\r\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\r\n\t\t\t);\r\n\t\t} else if (\r\n\t\t\ttype === 'tr' &&\r\n\t\t\tparentVNode.type !== 'thead' &&\r\n\t\t\tparentVNode.type !== 'tfoot' &&\r\n\t\t\tparentVNode.type !== 'tbody' &&\r\n\t\t\tparentVNode.type !== 'table'\r\n\t\t) {\r\n\t\t\tconsole.error(\r\n\t\t\t\t'Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent.' +\r\n\t\t\t\t\tserializeVNode(vnode) +\r\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\r\n\t\t\t);\r\n\t\t} else if (type === 'td' && parentVNode.type !== 'tr') {\r\n\t\t\tconsole.error(\r\n\t\t\t\t'Improper nesting of table. Your <td> should have a <tr> parent.' +\r\n\t\t\t\t\tserializeVNode(vnode) +\r\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\r\n\t\t\t);\r\n\t\t} else if (type === 'th' && parentVNode.type !== 'tr') {\r\n\t\t\tconsole.error(\r\n\t\t\t\t'Improper nesting of table. Your <th> should have a <tr>.' +\r\n\t\t\t\t\tserializeVNode(vnode) +\r\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\tvnode.ref !== undefined &&\r\n\t\t\ttypeof vnode.ref != 'function' &&\r\n\t\t\ttypeof vnode.ref != 'object' &&\r\n\t\t\t!('$$typeof' in vnode) // allow string refs when preact-compat is installed\r\n\t\t) {\r\n\t\t\tthrow new Error(\r\n\t\t\t\t`Component's \"ref\" property should be a function, or an object created ` +\r\n\t\t\t\t\t`by createRef(), but got [${typeof vnode.ref}] instead\\n` +\r\n\t\t\t\t\tserializeVNode(vnode) +\r\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (typeof vnode.type == 'string') {\r\n\t\t\tfor (const key in vnode.props) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tkey[0] === 'o' &&\r\n\t\t\t\t\tkey[1] === 'n' &&\r\n\t\t\t\t\ttypeof vnode.props[key] != 'function' &&\r\n\t\t\t\t\tvnode.props[key] != null\r\n\t\t\t\t) {\r\n\t\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\t`Component's \"${key}\" property should be a function, ` +\r\n\t\t\t\t\t\t\t`but got [${typeof vnode.props[key]}] instead\\n` +\r\n\t\t\t\t\t\t\tserializeVNode(vnode) +\r\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Check prop-types if available\r\n\t\tif (typeof vnode.type == 'function' && vnode.type.propTypes) {\r\n\t\t\tif (\r\n\t\t\t\tvnode.type.displayName === 'Lazy' &&\r\n\t\t\t\twarnedComponents &&\r\n\t\t\t\t!warnedComponents.lazyPropTypes.has(vnode.type)\r\n\t\t\t) {\r\n\t\t\t\tconst m =\r\n\t\t\t\t\t'PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ';\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst lazyVNode = vnode.type();\r\n\t\t\t\t\twarnedComponents.lazyPropTypes.set(vnode.type, true);\r\n\t\t\t\t\tconsole.warn(\r\n\t\t\t\t\t\tm + `Component wrapped in lazy() is ${getDisplayName(lazyVNode)}`\r\n\t\t\t\t\t);\r\n\t\t\t\t} catch (promise) {\r\n\t\t\t\t\tconsole.warn(\r\n\t\t\t\t\t\tm + \"We will log the wrapped component's name once it is loaded.\"\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet values = vnode.props;\r\n\t\t\tif (vnode.type._forwarded) {\r\n\t\t\t\tvalues = assign({}, values);\r\n\t\t\t\tdelete values.ref;\r\n\t\t\t}\r\n\r\n\t\t\tcheckPropTypes(\r\n\t\t\t\tvnode.type.propTypes,\r\n\t\t\t\tvalues,\r\n\t\t\t\t'prop',\r\n\t\t\t\tgetDisplayName(vnode),\r\n\t\t\t\t() => getOwnerStack(vnode)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (oldBeforeDiff) oldBeforeDiff(vnode);\r\n\t};\r\n\r\n\toptions._hook = (comp, index, type) => {\r\n\t\tif (!comp || !hooksAllowed) {\r\n\t\t\tthrow new Error('Hook can only be invoked from render methods.');\r\n\t\t}\r\n\r\n\t\tif (oldHook) oldHook(comp, index, type);\r\n\t};\r\n\r\n\t// Ideally we'd want to print a warning once per component, but we\r\n\t// don't have access to the vnode that triggered it here. As a\r\n\t// compromise and to avoid flooding the console with warnings we\r\n\t// print each deprecation warning only once.\r\n\tconst warn = (property, message) => ({\r\n\t\tget() {\r\n\t\t\tconst key = 'get' + property + message;\r\n\t\t\tif (deprecations && deprecations.indexOf(key) < 0) {\r\n\t\t\t\tdeprecations.push(key);\r\n\t\t\t\tconsole.warn(`getting vnode.${property} is deprecated, ${message}`);\r\n\t\t\t}\r\n\t\t},\r\n\t\tset() {\r\n\t\t\tconst key = 'set' + property + message;\r\n\t\t\tif (deprecations && deprecations.indexOf(key) < 0) {\r\n\t\t\t\tdeprecations.push(key);\r\n\t\t\t\tconsole.warn(`setting vnode.${property} is not allowed, ${message}`);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tconst deprecatedAttributes = {\r\n\t\tnodeName: warn('nodeName', 'use vnode.type'),\r\n\t\tattributes: warn('attributes', 'use vnode.props'),\r\n\t\tchildren: warn('children', 'use vnode.props.children')\r\n\t};\r\n\r\n\tconst deprecatedProto = Object.create({}, deprecatedAttributes);\r\n\r\n\toptions.vnode = vnode => {\r\n\t\tconst props = vnode.props;\r\n\t\tif (\r\n\t\t\tvnode.type !== null &&\r\n\t\t\tprops != null &&\r\n\t\t\t('__source' in props || '__self' in props)\r\n\t\t) {\r\n\t\t\tconst newProps = (vnode.props = {});\r\n\t\t\tfor (let i in props) {\r\n\t\t\t\tconst v = props[i];\r\n\t\t\t\tif (i === '__source') vnode.__source = v;\r\n\t\t\t\telse if (i === '__self') vnode.__self = v;\r\n\t\t\t\telse newProps[i] = v;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// eslint-disable-next-line\r\n\t\tvnode.__proto__ = deprecatedProto;\r\n\t\tif (oldVnode) oldVnode(vnode);\r\n\t};\r\n\r\n\toptions.diffed = vnode => {\r\n\t\t// Check if the user passed plain objects as children. Note that we cannot\r\n\t\t// move this check into `options.vnode` because components can receive\r\n\t\t// children in any shape they want (e.g.\r\n\t\t// `<MyJSONFormatter>{{ foo: 123, bar: \"abc\" }}</MyJSONFormatter>`).\r\n\t\t// Putting this check in `options.diffed` ensures that\r\n\t\t// `vnode._children` is set and that we only validate the children\r\n\t\t// that were actually rendered.\r\n\t\tif (vnode._children) {\r\n\t\t\tvnode._children.forEach(child => {\r\n\t\t\t\tif (child && child.type === undefined) {\r\n\t\t\t\t\t// Remove internal vnode keys that will always be patched\r\n\t\t\t\t\tdelete child._parent;\r\n\t\t\t\t\tdelete child._depth;\r\n\t\t\t\t\tconst keys = Object.keys(child).join(',');\r\n\t\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\t`Objects are not valid as a child. Encountered an object with the keys {${keys}}.` +\r\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\thooksAllowed = false;\r\n\r\n\t\tif (oldDiffed) oldDiffed(vnode);\r\n\r\n\t\tif (vnode._children != null) {\r\n\t\t\tconst keys = [];\r\n\t\t\tfor (let i = 0; i < vnode._children.length; i++) {\r\n\t\t\t\tconst child = vnode._children[i];\r\n\t\t\t\tif (!child || child.key == null) continue;\r\n\r\n\t\t\t\tconst key = child.key;\r\n\t\t\t\tif (keys.indexOf(key) !== -1) {\r\n\t\t\t\t\tconsole.error(\r\n\t\t\t\t\t\t'Following component has two or more children with the ' +\r\n\t\t\t\t\t\t\t`same key attribute: \"${key}\". This may cause glitches and misbehavior ` +\r\n\t\t\t\t\t\t\t'in rendering process. Component: \\n\\n' +\r\n\t\t\t\t\t\t\tserializeVNode(vnode) +\r\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t// Break early to not spam the console\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkeys.push(key);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nconst setState = Component.prototype.setState;\r\nComponent.prototype.setState = function(update, callback) {\r\n\tif (this._vnode == null) {\r\n\t\t// `this._vnode` will be `null` during componentWillMount. But it\r\n\t\t// is perfectly valid to call `setState` during cWM. So we\r\n\t\t// need an additional check to verify that we are dealing with a\r\n\t\t// call inside constructor.\r\n\t\tif (this.state == null) {\r\n\t\t\tconsole.warn(\r\n\t\t\t\t`Calling \"this.setState\" inside the constructor of a component is a ` +\r\n\t\t\t\t\t`no-op and might be a bug in your application. Instead, set ` +\r\n\t\t\t\t\t`\"this.state = {}\" directly.\\n\\n${getOwnerStack(getCurrentVNode())}`\r\n\t\t\t);\r\n\t\t}\r\n\t} else if (this._parentDom == null) {\r\n\t\tconsole.warn(\r\n\t\t\t`Can't call \"this.setState\" on an unmounted component. This is a no-op, ` +\r\n\t\t\t\t`but it indicates a memory leak in your application. To fix, cancel all ` +\r\n\t\t\t\t`subscriptions and asynchronous tasks in the componentWillUnmount method.` +\r\n\t\t\t\t`\\n\\n${getOwnerStack(this._vnode)}`\r\n\t\t);\r\n\t}\r\n\r\n\treturn setState.call(this, update, callback);\r\n};\r\n\r\nconst forceUpdate = Component.prototype.forceUpdate;\r\nComponent.prototype.forceUpdate = function(callback) {\r\n\tif (this._vnode == null) {\r\n\t\tconsole.warn(\r\n\t\t\t`Calling \"this.forceUpdate\" inside the constructor of a component is a ` +\r\n\t\t\t\t`no-op and might be a bug in your application.\\n\\n${getOwnerStack(\r\n\t\t\t\t\tgetCurrentVNode()\r\n\t\t\t\t)}`\r\n\t\t);\r\n\t} else if (this._parentDom == null) {\r\n\t\tconsole.warn(\r\n\t\t\t`Can't call \"this.forceUpdate\" on an unmounted component. This is a no-op, ` +\r\n\t\t\t\t`but it indicates a memory leak in your application. To fix, cancel all ` +\r\n\t\t\t\t`subscriptions and asynchronous tasks in the componentWillUnmount method.` +\r\n\t\t\t\t`\\n\\n${getOwnerStack(this._vnode)}`\r\n\t\t);\r\n\t}\r\n\treturn forceUpdate.call(this, callback);\r\n};\r\n\r\n/**\r\n * Serialize a vnode tree to a string\r\n * @param {import('./internal').VNode} vnode\r\n * @returns {string}\r\n */\r\nexport function serializeVNode(vnode) {\r\n\tlet { props } = vnode;\r\n\tlet name = getDisplayName(vnode);\r\n\r\n\tlet attrs = '';\r\n\tfor (let prop in props) {\r\n\t\tif (props.hasOwnProperty(prop) && prop !== 'children') {\r\n\t\t\tlet value = props[prop];\r\n\r\n\t\t\t// If it is an object but doesn't have toString(), use Object.toString\r\n\t\t\tif (typeof value == 'function') {\r\n\t\t\t\tvalue = `function ${value.displayName || value.name}() {}`;\r\n\t\t\t}\r\n\r\n\t\t\tvalue =\r\n\t\t\t\tObject(value) === value && !value.toString\r\n\t\t\t\t\t? Object.prototype.toString.call(value)\r\n\t\t\t\t\t: value + '';\r\n\r\n\t\t\tattrs += ` ${prop}=${JSON.stringify(value)}`;\r\n\t\t}\r\n\t}\r\n\r\n\tlet children = props.children;\r\n\treturn `<${name}${attrs}${\r\n\t\tchildren && children.length ? '>..</' + name + '>' : ' />'\r\n\t}`;\r\n}\r\n","export const ELEMENT_NODE = 1;\r\nexport const DOCUMENT_NODE = 9;\r\nexport const DOCUMENT_FRAGMENT_NODE = 11;\r\n","/**\r\n * Assign properties from `props` to `obj`\r\n * @template O, P The obj and props types\r\n * @param {O} obj The object to copy properties to\r\n * @param {P} props The object to copy properties from\r\n * @returns {O & P}\r\n */\r\nexport function assign(obj, props) {\r\n\tfor (let i in props) obj[i] = props[i];\r\n\treturn /** @type {O & P} */ (obj);\r\n}\r\n"],"names":["loggedTypeFailures","getDisplayName","vnode","type","Fragment","displayName","name","renderStack","ownerStack","getCurrentVNode","length","hasBabelPlugin","isPossibleOwner","getOwnerStack","stack","next","push","reduce","acc","owner","source","__source","fileName","lineNumber","console","warn","isWeakMapSupported","WeakMap","setState","Component","prototype","update","callback","this","state","call","forceUpdate","serializeVNode","props","attrs","prop","hasOwnProperty","value","Object","toString","JSON","stringify","children","oldDiff","options","oldDiffed","diffed","oldRoot","oldVNode","oldRender","pop","parent","setupComponentStack","hooksAllowed","oldBeforeDiff","oldVnode","oldCatchError","oldHook","warnedComponents","useEffect","useLayoutEffect","lazyPropTypes","deprecations","error","then","promise","Error","setTimeout","e","parentNode","isValid","nodeType","componentName","parentVNode","getClosestDomNodeParent","undefined","Array","isArray","ref","key","propTypes","has","m","lazyVNode","set","values","obj","i","assign","typeSpecs","location","getStack","keys","forEach","typeSpecName","message","checkPropTypes","comp","index","property","get","indexOf","deprecatedAttributes","nodeName","attributes","deprecatedProto","create","newProps","v","__self","__proto__","child","join"],"mappings":"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"}