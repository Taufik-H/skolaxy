{"version":3,"file":"radio-group.esm.js","sources":["../../../src/components/radio-group/radio-group.ts"],"sourcesContent":["import {\n  computed,\n  defineComponent,\n  inject,\n  onMounted,\n  onUnmounted,\n  provide,\n  ref,\n  toRaw,\n\n  // Types\n  InjectionKey,\n  Ref,\n  UnwrapRef,\n} from 'vue'\nimport { dom } from '../../utils/dom'\nimport { Keys } from '../../keyboard'\nimport { focusIn, Focus, FocusResult } from '../../utils/focus-management'\nimport { useId } from '../../hooks/use-id'\nimport { render } from '../../utils/render'\nimport { Label, useLabels } from '../label/label'\nimport { Description, useDescriptions } from '../description/description'\nimport { useTreeWalker } from '../../hooks/use-tree-walker'\n\ninterface Option {\n  id: string\n  element: Ref<HTMLElement | null>\n  propsRef: Ref<{ value: unknown; disabled: boolean }>\n}\n\ninterface StateDefinition {\n  // State\n  options: Ref<Option[]>\n  value: Ref<unknown>\n  disabled: Ref<boolean>\n  firstOption: Ref<Option | undefined>\n  containsCheckedOption: Ref<boolean>\n\n  // State mutators\n  change(nextValue: unknown): boolean\n  registerOption(action: Option): void\n  unregisterOption(id: Option['id']): void\n}\n\nlet RadioGroupContext = Symbol('RadioGroupContext') as InjectionKey<StateDefinition>\n\nfunction useRadioGroupContext(component: string) {\n  let context = inject(RadioGroupContext, null)\n\n  if (context === null) {\n    let err = new Error(`<${component} /> is missing a parent <RadioGroup /> component.`)\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useRadioGroupContext)\n    throw err\n  }\n\n  return context\n}\n\n// ---\n\nexport let RadioGroup = defineComponent({\n  name: 'RadioGroup',\n  emits: { 'update:modelValue': (_value: any) => true },\n  props: {\n    as: { type: [Object, String], default: 'div' },\n    disabled: { type: [Boolean], default: false },\n    modelValue: { type: [Object, String, Number, Boolean] },\n  },\n  render() {\n    let { modelValue, disabled, ...passThroughProps } = this.$props\n\n    let propsWeControl = {\n      ref: 'el',\n      id: this.id,\n      role: 'radiogroup',\n      'aria-labelledby': this.labelledby,\n      'aria-describedby': this.describedby,\n      onKeydown: this.handleKeyDown,\n    }\n\n    return render({\n      props: { ...passThroughProps, ...propsWeControl },\n      slot: {},\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'RadioGroup',\n    })\n  },\n  setup(props, { emit }) {\n    let radioGroupRef = ref<HTMLElement | null>(null)\n    let options = ref<StateDefinition['options']['value']>([])\n    let labelledby = useLabels({ name: 'RadioGroupLabel' })\n    let describedby = useDescriptions({ name: 'RadioGroupDescription' })\n\n    let value = computed(() => props.modelValue)\n\n    let api = {\n      options,\n      value,\n      disabled: computed(() => props.disabled),\n      firstOption: computed(() =>\n        options.value.find(option => {\n          if (option.propsRef.disabled) return false\n          return true\n        })\n      ),\n      containsCheckedOption: computed(() =>\n        options.value.some(option => toRaw(option.propsRef.value) === toRaw(props.modelValue))\n      ),\n      change(nextValue: unknown) {\n        if (props.disabled) return false\n        if (value.value === nextValue) return false\n        let nextOption = options.value.find(\n          option => toRaw(option.propsRef.value) === toRaw(nextValue)\n        )?.propsRef\n        if (nextOption?.disabled) return false\n        emit('update:modelValue', nextValue)\n        return true\n      },\n      registerOption(action: UnwrapRef<Option>) {\n        let orderMap = Array.from(\n          radioGroupRef.value?.querySelectorAll('[id^=\"headlessui-radiogroup-option-\"]')!\n        ).reduce(\n          (lookup, element, index) => Object.assign(lookup, { [element.id]: index }),\n          {}\n        ) as Record<string, number>\n\n        options.value.push(action)\n        options.value.sort((a, z) => orderMap[a.id] - orderMap[z.id])\n      },\n      unregisterOption(id: Option['id']) {\n        let idx = options.value.findIndex(radio => radio.id === id)\n        if (idx === -1) return\n        options.value.splice(idx, 1)\n      },\n    }\n\n    // @ts-expect-error ...\n    provide(RadioGroupContext, api)\n\n    useTreeWalker({\n      container: computed(() => dom(radioGroupRef)),\n      accept(node) {\n        if (node.getAttribute('role') === 'radio') return NodeFilter.FILTER_REJECT\n        if (node.hasAttribute('role')) return NodeFilter.FILTER_SKIP\n        return NodeFilter.FILTER_ACCEPT\n      },\n      walk(node) {\n        node.setAttribute('role', 'none')\n      },\n    })\n\n    function handleKeyDown(event: KeyboardEvent) {\n      if (!radioGroupRef.value) return\n      if (!radioGroupRef.value.contains(event.target as HTMLElement)) return\n\n      let all = options.value\n        .filter(option => option.propsRef.disabled === false)\n        .map(radio => radio.element) as HTMLElement[]\n\n      switch (event.key) {\n        case Keys.ArrowLeft:\n        case Keys.ArrowUp:\n          {\n            event.preventDefault()\n            event.stopPropagation()\n\n            let result = focusIn(all, Focus.Previous | Focus.WrapAround)\n\n            if (result === FocusResult.Success) {\n              let activeOption = options.value.find(\n                option => option.element === document.activeElement\n              )\n              if (activeOption) api.change(activeOption.propsRef.value)\n            }\n          }\n          break\n\n        case Keys.ArrowRight:\n        case Keys.ArrowDown:\n          {\n            event.preventDefault()\n            event.stopPropagation()\n\n            let result = focusIn(all, Focus.Next | Focus.WrapAround)\n\n            if (result === FocusResult.Success) {\n              let activeOption = options.value.find(\n                option => option.element === document.activeElement\n              )\n              if (activeOption) api.change(activeOption.propsRef.value)\n            }\n          }\n          break\n\n        case Keys.Space:\n          {\n            event.preventDefault()\n            event.stopPropagation()\n\n            let activeOption = options.value.find(\n              option => option.element === document.activeElement\n            )\n            if (activeOption) api.change(activeOption.propsRef.value)\n          }\n          break\n      }\n    }\n\n    let id = `headlessui-radiogroup-${useId()}`\n\n    return {\n      id,\n      labelledby,\n      describedby,\n      el: radioGroupRef,\n      handleKeyDown,\n    }\n  },\n})\n\n// ---\n\nenum OptionState {\n  Empty = 1 << 0,\n  Active = 1 << 1,\n}\n\nexport let RadioGroupOption = defineComponent({\n  name: 'RadioGroupOption',\n  props: {\n    as: { type: [Object, String], default: 'div' },\n    value: { type: [Object, String, Number, Boolean] },\n    disabled: { type: Boolean, default: false },\n  },\n  render() {\n    let { value, disabled, ...passThroughProps } = this.$props\n\n    let slot = {\n      checked: this.checked,\n      disabled: this.disabled,\n      active: Boolean(this.state & OptionState.Active),\n    }\n\n    let propsWeControl = {\n      id: this.id,\n      ref: 'el',\n      role: 'radio',\n      'aria-checked': this.checked ? 'true' : 'false',\n      'aria-labelledby': this.labelledby,\n      'aria-describedby': this.describedby,\n      'aria-disabled': this.disabled ? true : undefined,\n      tabIndex: this.tabIndex,\n      onClick: this.disabled ? undefined : this.handleClick,\n      onFocus: this.disabled ? undefined : this.handleFocus,\n      onBlur: this.disabled ? undefined : this.handleBlur,\n    }\n\n    return render({\n      props: { ...passThroughProps, ...propsWeControl },\n      slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'RadioGroupOption',\n    })\n  },\n  setup(props) {\n    let api = useRadioGroupContext('RadioGroupOption')\n    let id = `headlessui-radiogroup-option-${useId()}`\n    let labelledby = useLabels({ name: 'RadioGroupLabel' })\n    let describedby = useDescriptions({ name: 'RadioGroupDescription' })\n\n    let optionRef = ref<HTMLElement | null>(null)\n    let propsRef = computed(() => ({ value: props.value, disabled: props.disabled }))\n    let state = ref(OptionState.Empty)\n\n    onMounted(() => api.registerOption({ id, element: optionRef, propsRef }))\n    onUnmounted(() => api.unregisterOption(id))\n\n    let isFirstOption = computed(() => api.firstOption.value?.id === id)\n    let disabled = computed(() => api.disabled.value || props.disabled)\n    let checked = computed(() => toRaw(api.value.value) === toRaw(props.value))\n\n    return {\n      id,\n      el: optionRef,\n      labelledby,\n      describedby,\n      state,\n      disabled,\n      checked,\n      tabIndex: computed(() => {\n        if (disabled.value) return -1\n        if (checked.value) return 0\n        if (!api.containsCheckedOption.value && isFirstOption.value) return 0\n        return -1\n      }),\n      handleClick() {\n        if (!api.change(props.value)) return\n\n        state.value |= OptionState.Active\n        optionRef.value?.focus()\n      },\n      handleFocus() {\n        state.value |= OptionState.Active\n      },\n      handleBlur() {\n        state.value &= ~OptionState.Active\n      },\n    }\n  },\n})\n\n// ---\n\nexport let RadioGroupLabel = Label\nexport let RadioGroupDescription = Description\n"],"names":["RadioGroupContext","Symbol","useRadioGroupContext","component","context","inject","err","Error","captureStackTrace","RadioGroup","defineComponent","name","emits","_value","props","as","type","Object","String","disabled","Boolean","modelValue","Number","render","$props","passThroughProps","propsWeControl","ref","id","role","labelledby","describedby","onKeydown","handleKeyDown","slot","attrs","$attrs","slots","$slots","setup","emit","radioGroupRef","options","useLabels","useDescriptions","value","computed","api","firstOption","find","option","propsRef","containsCheckedOption","some","toRaw","change","nextValue","nextOption","registerOption","action","orderMap","Array","from","querySelectorAll","reduce","lookup","element","index","assign","push","sort","a","z","unregisterOption","idx","findIndex","radio","splice","provide","useTreeWalker","container","dom","accept","node","getAttribute","NodeFilter","FILTER_REJECT","hasAttribute","FILTER_SKIP","FILTER_ACCEPT","walk","setAttribute","event","contains","target","all","filter","map","key","Keys","ArrowLeft","ArrowUp","preventDefault","stopPropagation","result","focusIn","Focus","Previous","WrapAround","FocusResult","Success","activeOption","document","activeElement","ArrowRight","ArrowDown","Next","Space","useId","el","OptionState","RadioGroupOption","checked","active","state","Active","undefined","tabIndex","onClick","handleClick","onFocus","handleFocus","onBlur","handleBlur","optionRef","Empty","onMounted","onUnmounted","isFirstOption","focus","RadioGroupLabel","Label","RadioGroupDescription","Description"],"mappings":"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"}