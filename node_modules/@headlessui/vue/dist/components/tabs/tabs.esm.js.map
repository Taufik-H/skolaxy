{"version":3,"file":"tabs.esm.js","sources":["../../../src/components/tabs/tabs.ts"],"sourcesContent":["import {\n  defineComponent,\n  ref,\n  provide,\n  inject,\n  onMounted,\n  onUnmounted,\n  computed,\n  InjectionKey,\n  Ref,\n} from 'vue'\n\nimport { Features, render, omit } from '../../utils/render'\nimport { useId } from '../../hooks/use-id'\nimport { Keys } from '../../keyboard'\nimport { dom } from '../../utils/dom'\nimport { match } from '../../utils/match'\nimport { focusIn, Focus } from '../../utils/focus-management'\nimport { useResolveButtonType } from '../../hooks/use-resolve-button-type'\n\ntype StateDefinition = {\n  // State\n  selectedIndex: Ref<number | null>\n  orientation: Ref<'vertical' | 'horizontal'>\n  activation: Ref<'auto' | 'manual'>\n\n  tabs: Ref<Ref<HTMLElement | null>[]>\n  panels: Ref<Ref<HTMLElement | null>[]>\n\n  // State mutators\n  setSelectedIndex(index: number): void\n  registerTab(tab: Ref<HTMLElement | null>): void\n  unregisterTab(tab: Ref<HTMLElement | null>): void\n  registerPanel(panel: Ref<HTMLElement | null>): void\n  unregisterPanel(panel: Ref<HTMLElement | null>): void\n}\n\nlet TabsContext = Symbol('TabsContext') as InjectionKey<StateDefinition>\n\nfunction useTabsContext(component: string) {\n  let context = inject(TabsContext, null)\n\n  if (context === null) {\n    let err = new Error(`<${component} /> is missing a parent <TabGroup /> component.`)\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useTabsContext)\n    throw err\n  }\n\n  return context\n}\n\n// ---\n\nexport let TabGroup = defineComponent({\n  name: 'TabGroup',\n  emits: {\n    change: (_index: number) => true,\n  },\n  props: {\n    as: { type: [Object, String], default: 'template' },\n    defaultIndex: { type: [Number], default: 0 },\n    vertical: { type: [Boolean], default: false },\n    manual: { type: [Boolean], default: false },\n  },\n  setup(props, { slots, attrs, emit }) {\n    let selectedIndex = ref<StateDefinition['selectedIndex']['value']>(null)\n    let tabs = ref<StateDefinition['tabs']['value']>([])\n    let panels = ref<StateDefinition['panels']['value']>([])\n\n    let api = {\n      selectedIndex,\n      orientation: computed(() => (props.vertical ? 'vertical' : 'horizontal')),\n      activation: computed(() => (props.manual ? 'manual' : 'auto')),\n      tabs,\n      panels,\n      setSelectedIndex(index: number) {\n        if (selectedIndex.value === index) return\n        selectedIndex.value = index\n        emit('change', index)\n      },\n      registerTab(tab: typeof tabs['value'][number]) {\n        if (!tabs.value.includes(tab)) tabs.value.push(tab)\n      },\n      unregisterTab(tab: typeof tabs['value'][number]) {\n        let idx = tabs.value.indexOf(tab)\n        if (idx !== -1) tabs.value.slice(idx, 1)\n      },\n      registerPanel(panel: typeof panels['value'][number]) {\n        if (!panels.value.includes(panel)) panels.value.push(panel)\n      },\n      unregisterPanel(panel: typeof panels['value'][number]) {\n        let idx = panels.value.indexOf(panel)\n        if (idx !== -1) panels.value.slice(idx, 1)\n      },\n    }\n\n    provide(TabsContext, api)\n\n    onMounted(() => {\n      if (api.tabs.value.length <= 0) return console.log('bail')\n      if (selectedIndex.value !== null) return console.log('bail 2')\n\n      let tabs = api.tabs.value.map(tab => dom(tab)).filter(Boolean) as HTMLElement[]\n      let focusableTabs = tabs.filter(tab => !tab.hasAttribute('disabled'))\n\n      // Underflow\n      if (props.defaultIndex < 0) {\n        selectedIndex.value = tabs.indexOf(focusableTabs[0])\n      }\n\n      // Overflow\n      else if (props.defaultIndex > api.tabs.value.length) {\n        selectedIndex.value = tabs.indexOf(focusableTabs[focusableTabs.length - 1])\n      }\n\n      // Middle\n      else {\n        let before = tabs.slice(0, props.defaultIndex)\n        let after = tabs.slice(props.defaultIndex)\n\n        let next = [...after, ...before].find(tab => focusableTabs.includes(tab))\n        if (!next) return\n\n        selectedIndex.value = tabs.indexOf(next)\n      }\n    })\n\n    return () => {\n      let slot = { selectedIndex: selectedIndex.value }\n\n      return render({\n        props: omit(props, ['defaultIndex', 'manual', 'vertical']),\n        slot,\n        slots,\n        attrs,\n        name: 'TabGroup',\n      })\n    }\n  },\n})\n\n// ---\n\nexport let TabList = defineComponent({\n  name: 'TabList',\n  props: {\n    as: { type: [Object, String], default: 'div' },\n  },\n  setup(props, { attrs, slots }) {\n    let api = useTabsContext('TabList')\n\n    return () => {\n      let slot = { selectedIndex: api.selectedIndex.value }\n\n      let propsWeControl = {\n        role: 'tablist',\n        'aria-orientation': api.orientation.value,\n      }\n      let passThroughProps = props\n\n      return render({\n        props: { ...passThroughProps, ...propsWeControl },\n        slot,\n        attrs,\n        slots,\n        name: 'TabList',\n      })\n    }\n  },\n})\n\n// ---\n\nexport let Tab = defineComponent({\n  name: 'Tab',\n  props: {\n    as: { type: [Object, String], default: 'button' },\n    disabled: { type: [Boolean], default: false },\n  },\n  render() {\n    let api = useTabsContext('Tab')\n\n    let slot = { selected: this.selected }\n    let propsWeControl = {\n      ref: 'el',\n      onKeydown: this.handleKeyDown,\n      onFocus: api.activation.value === 'manual' ? this.handleFocus : this.handleSelection,\n      onClick: this.handleSelection,\n      id: this.id,\n      role: 'tab',\n      type: this.type,\n      'aria-controls': api.panels.value[this.myIndex]?.value?.id,\n      'aria-selected': this.selected,\n      tabIndex: this.selected ? 0 : -1,\n      disabled: this.$props.disabled ? true : undefined,\n    }\n\n    if (process.env.NODE_ENV === 'test') {\n      Object.assign(propsWeControl, { ['data-headlessui-index']: this.myIndex })\n    }\n\n    return render({\n      props: { ...this.$props, ...propsWeControl },\n      slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'Tab',\n    })\n  },\n  setup(props, { attrs }) {\n    let api = useTabsContext('Tab')\n    let id = `headlessui-tabs-tab-${useId()}`\n\n    let tabRef = ref()\n\n    onMounted(() => api.registerTab(tabRef))\n    onUnmounted(() => api.unregisterTab(tabRef))\n\n    let myIndex = computed(() => api.tabs.value.indexOf(tabRef))\n    let selected = computed(() => myIndex.value === api.selectedIndex.value)\n\n    function handleKeyDown(event: KeyboardEvent) {\n      let list = api.tabs.value.map(tab => dom(tab)).filter(Boolean) as HTMLElement[]\n\n      if (event.key === Keys.Space || event.key === Keys.Enter) {\n        event.preventDefault()\n        event.stopPropagation()\n\n        api.setSelectedIndex(myIndex.value)\n        return\n      }\n\n      switch (event.key) {\n        case Keys.Home:\n        case Keys.PageUp:\n          event.preventDefault()\n          event.stopPropagation()\n\n          return focusIn(list, Focus.First)\n\n        case Keys.End:\n        case Keys.PageDown:\n          event.preventDefault()\n          event.stopPropagation()\n\n          return focusIn(list, Focus.Last)\n      }\n\n      return match(api.orientation.value, {\n        vertical() {\n          if (event.key === Keys.ArrowUp) return focusIn(list, Focus.Previous | Focus.WrapAround)\n          if (event.key === Keys.ArrowDown) return focusIn(list, Focus.Next | Focus.WrapAround)\n          return\n        },\n        horizontal() {\n          if (event.key === Keys.ArrowLeft) return focusIn(list, Focus.Previous | Focus.WrapAround)\n          if (event.key === Keys.ArrowRight) return focusIn(list, Focus.Next | Focus.WrapAround)\n          return\n        },\n      })\n    }\n\n    function handleFocus() {\n      dom(tabRef)?.focus()\n    }\n\n    function handleSelection() {\n      if (props.disabled) return\n\n      dom(tabRef)?.focus()\n      api.setSelectedIndex(myIndex.value)\n    }\n\n    return {\n      el: tabRef,\n      id,\n      selected,\n      myIndex,\n      type: useResolveButtonType(\n        computed(() => ({ as: props.as, type: attrs.type })),\n        tabRef\n      ),\n      handleKeyDown,\n      handleFocus,\n      handleSelection,\n    }\n  },\n})\n\n// ---\n\nexport let TabPanels = defineComponent({\n  name: 'TabPanels',\n  props: {\n    as: { type: [Object, String], default: 'div' },\n  },\n  setup(props, { slots, attrs }) {\n    let api = useTabsContext('TabPanels')\n\n    return () => {\n      let slot = { selectedIndex: api.selectedIndex.value }\n\n      return render({\n        props,\n        slot,\n        attrs,\n        slots,\n        name: 'TabPanels',\n      })\n    }\n  },\n})\n\nexport let TabPanel = defineComponent({\n  name: 'TabPanel',\n  props: {\n    as: { type: [Object, String], default: 'div' },\n    static: { type: Boolean, default: false },\n    unmount: { type: Boolean, default: true },\n  },\n  render() {\n    let api = useTabsContext('TabPanel')\n\n    let slot = { selected: this.selected }\n    let propsWeControl = {\n      ref: 'el',\n      id: this.id,\n      role: 'tabpanel',\n      'aria-labelledby': api.tabs.value[this.myIndex]?.value?.id,\n      tabIndex: this.selected ? 0 : -1,\n    }\n\n    if (process.env.NODE_ENV === 'test') {\n      Object.assign(propsWeControl, { ['data-headlessui-index']: this.myIndex })\n    }\n\n    return render({\n      props: { ...this.$props, ...propsWeControl },\n      slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      features: Features.Static | Features.RenderStrategy,\n      visible: this.selected,\n      name: 'TabPanel',\n    })\n  },\n  setup() {\n    let api = useTabsContext('TabPanel')\n    let id = `headlessui-tabs-panel-${useId()}`\n\n    let panelRef = ref()\n\n    onMounted(() => api.registerPanel(panelRef))\n    onUnmounted(() => api.unregisterPanel(panelRef))\n\n    let myIndex = computed(() => api.panels.value.indexOf(panelRef))\n    let selected = computed(() => myIndex.value === api.selectedIndex.value)\n\n    return { id, el: panelRef, selected, myIndex }\n  },\n})\n"],"names":["TabsContext","Symbol","useTabsContext","component","context","inject","err","Error","captureStackTrace","TabGroup","defineComponent","name","emits","change","_index","props","as","type","Object","String","defaultIndex","Number","vertical","Boolean","manual","setup","slots","attrs","emit","selectedIndex","ref","tabs","panels","api","orientation","computed","activation","setSelectedIndex","index","value","registerTab","tab","includes","push","unregisterTab","idx","indexOf","slice","registerPanel","panel","unregisterPanel","provide","onMounted","length","console","log","map","dom","filter","focusableTabs","hasAttribute","before","after","next","find","slot","render","omit","TabList","propsWeControl","role","passThroughProps","Tab","disabled","selected","onKeydown","handleKeyDown","onFocus","handleFocus","handleSelection","onClick","id","myIndex","tabIndex","$props","undefined","process","env","NODE_ENV","assign","$attrs","$slots","useId","tabRef","onUnmounted","event","list","key","Keys","Space","Enter","preventDefault","stopPropagation","Home","PageUp","focusIn","Focus","First","End","PageDown","Last","match","ArrowUp","Previous","WrapAround","ArrowDown","Next","horizontal","ArrowLeft","ArrowRight","focus","el","useResolveButtonType","TabPanels","TabPanel","unmount","features","Features","Static","RenderStrategy","visible","panelRef"],"mappings":"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"}