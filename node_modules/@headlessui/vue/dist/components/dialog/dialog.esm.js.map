{"version":3,"file":"dialog.esm.js","sources":["../../../src/components/dialog/dialog.ts"],"sourcesContent":["// WAI-ARIA: https://www.w3.org/TR/wai-aria-practices-1.2/#dialog_modal\nimport {\n  computed,\n  defineComponent,\n  h,\n  inject,\n  nextTick,\n  onMounted,\n  onUnmounted,\n  onUpdated,\n  provide,\n  ref,\n  watchEffect,\n\n  // Types\n  InjectionKey,\n  PropType,\n  Ref,\n} from 'vue'\n\nimport { render, Features } from '../../utils/render'\nimport { Keys } from '../../keyboard'\nimport { useId } from '../../hooks/use-id'\nimport { useFocusTrap } from '../../hooks/use-focus-trap'\nimport { useInertOthers } from '../../hooks/use-inert-others'\nimport { contains } from '../../internal/dom-containers'\nimport { useWindowEvent } from '../../hooks/use-window-event'\nimport { Portal, PortalGroup } from '../portal/portal'\nimport { StackMessage, useStackProvider } from '../../internal/stack-context'\nimport { match } from '../../utils/match'\nimport { ForcePortalRoot } from '../../internal/portal-force-root'\nimport { Description, useDescriptions } from '../description/description'\nimport { dom } from '../../utils/dom'\nimport { useOpenClosed, State } from '../../internal/open-closed'\n\nenum DialogStates {\n  Open,\n  Closed,\n}\n\ninterface StateDefinition {\n  dialogState: Ref<DialogStates>\n\n  titleId: Ref<string | null>\n\n  setTitleId(id: string | null): void\n\n  close(): void\n}\n\nlet DialogContext = Symbol('DialogContext') as InjectionKey<StateDefinition>\n\nfunction useDialogContext(component: string) {\n  let context = inject(DialogContext, null)\n  if (context === null) {\n    let err = new Error(`<${component} /> is missing a parent <Dialog /> component.`)\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useDialogContext)\n    throw err\n  }\n  return context\n}\n\n// ---\n\nlet Missing = 'DC8F892D-2EBD-447C-A4C8-A03058436FF4'\n\nexport let Dialog = defineComponent({\n  name: 'Dialog',\n  inheritAttrs: false, // Manually handling this\n  props: {\n    as: { type: [Object, String], default: 'div' },\n    static: { type: Boolean, default: false },\n    unmount: { type: Boolean, default: true },\n    open: { type: [Boolean, String], default: Missing },\n    initialFocus: { type: Object as PropType<HTMLElement | null>, default: null },\n  },\n  emits: { close: (_close: boolean) => true },\n  render() {\n    let propsWeControl = {\n      // Manually passthrough the attributes, because Vue can't automatically pass\n      // it to the underlying div because of all the wrapper components below.\n      ...this.$attrs,\n      ref: 'el',\n      id: this.id,\n      role: 'dialog',\n      'aria-modal': this.dialogState === DialogStates.Open ? true : undefined,\n      'aria-labelledby': this.titleId,\n      'aria-describedby': this.describedby,\n      onClick: this.handleClick,\n    }\n    let { open: _, initialFocus, ...passThroughProps } = this.$props\n\n    let slot = { open: this.dialogState === DialogStates.Open }\n\n    return h(ForcePortalRoot, { force: true }, () =>\n      h(Portal, () =>\n        h(PortalGroup, { target: this.dialogRef }, () =>\n          h(ForcePortalRoot, { force: false }, () =>\n            render({\n              props: { ...passThroughProps, ...propsWeControl },\n              slot,\n              attrs: this.$attrs,\n              slots: this.$slots,\n              visible: this.visible,\n              features: Features.RenderStrategy | Features.Static,\n              name: 'Dialog',\n            })\n          )\n        )\n      )\n    )\n  },\n  setup(props, { emit }) {\n    let containers = ref<Set<HTMLElement>>(new Set())\n\n    let usesOpenClosedState = useOpenClosed()\n    let open = computed(() => {\n      if (props.open === Missing && usesOpenClosedState !== null) {\n        // Update the `open` prop based on the open closed state\n        return match(usesOpenClosedState.value, {\n          [State.Open]: true,\n          [State.Closed]: false,\n        })\n      }\n      return props.open\n    })\n\n    // Validations\n    let hasOpen = props.open !== Missing || usesOpenClosedState !== null\n\n    if (!hasOpen) {\n      throw new Error(`You forgot to provide an \\`open\\` prop to the \\`Dialog\\`.`)\n    }\n\n    if (typeof open.value !== 'boolean') {\n      throw new Error(\n        `You provided an \\`open\\` prop to the \\`Dialog\\`, but the value is not a boolean. Received: ${\n          open.value === Missing ? undefined : props.open\n        }`\n      )\n    }\n\n    let dialogState = computed(() => (props.open ? DialogStates.Open : DialogStates.Closed))\n    let visible = computed(() => {\n      if (usesOpenClosedState !== null) {\n        return usesOpenClosedState.value === State.Open\n      }\n\n      return dialogState.value === DialogStates.Open\n    })\n    let internalDialogRef = ref<HTMLDivElement | null>(null)\n    let enabled = ref(dialogState.value === DialogStates.Open)\n\n    onUpdated(() => {\n      enabled.value = dialogState.value === DialogStates.Open\n    })\n\n    let id = `headlessui-dialog-${useId()}`\n    let focusTrapOptions = computed(() => ({ initialFocus: props.initialFocus }))\n\n    useFocusTrap(containers, enabled, focusTrapOptions)\n    useInertOthers(internalDialogRef, enabled)\n    useStackProvider((message, element) => {\n      return match(message, {\n        [StackMessage.AddElement]() {\n          containers.value.add(element)\n        },\n        [StackMessage.RemoveElement]() {\n          containers.value.delete(element)\n        },\n      })\n    })\n\n    let describedby = useDescriptions({\n      name: 'DialogDescription',\n      slot: computed(() => ({ open: open.value })),\n    })\n\n    let titleId = ref<StateDefinition['titleId']['value']>(null)\n\n    let api = {\n      titleId,\n      dialogState,\n      setTitleId(id: string | null) {\n        if (titleId.value === id) return\n        titleId.value = id\n      },\n      close() {\n        emit('close', false)\n      },\n    }\n\n    provide(DialogContext, api)\n\n    // Handle outside click\n    useWindowEvent('mousedown', event => {\n      let target = event.target as HTMLElement\n\n      if (dialogState.value !== DialogStates.Open) return\n      if (containers.value.size !== 1) return\n      if (contains(containers.value, target)) return\n\n      api.close()\n      nextTick(() => target?.focus())\n    })\n\n    // Handle `Escape` to close\n    useWindowEvent('keydown', event => {\n      if (event.key !== Keys.Escape) return\n      if (dialogState.value !== DialogStates.Open) return\n      if (containers.value.size > 1) return // 1 is myself, otherwise other elements in the Stack\n      event.preventDefault()\n      event.stopPropagation()\n      api.close()\n    })\n\n    // Scroll lock\n    watchEffect(onInvalidate => {\n      if (dialogState.value !== DialogStates.Open) return\n\n      let overflow = document.documentElement.style.overflow\n      let paddingRight = document.documentElement.style.paddingRight\n\n      let scrollbarWidth = window.innerWidth - document.documentElement.clientWidth\n\n      document.documentElement.style.overflow = 'hidden'\n      document.documentElement.style.paddingRight = `${scrollbarWidth}px`\n\n      onInvalidate(() => {\n        document.documentElement.style.overflow = overflow\n        document.documentElement.style.paddingRight = paddingRight\n      })\n    })\n\n    // Trigger close when the FocusTrap gets hidden\n    watchEffect(onInvalidate => {\n      if (dialogState.value !== DialogStates.Open) return\n      let container = dom(internalDialogRef)\n      if (!container) return\n\n      let observer = new IntersectionObserver(entries => {\n        for (let entry of entries) {\n          if (\n            entry.boundingClientRect.x === 0 &&\n            entry.boundingClientRect.y === 0 &&\n            entry.boundingClientRect.width === 0 &&\n            entry.boundingClientRect.height === 0\n          ) {\n            api.close()\n          }\n        }\n      })\n\n      observer.observe(container)\n\n      onInvalidate(() => observer.disconnect())\n    })\n\n    return {\n      id,\n      el: internalDialogRef,\n      dialogRef: internalDialogRef,\n      containers,\n      dialogState,\n      titleId,\n      describedby,\n      visible,\n      open,\n      handleClick(event: MouseEvent) {\n        event.stopPropagation()\n      },\n    }\n  },\n})\n\n// ---\n\nexport let DialogOverlay = defineComponent({\n  name: 'DialogOverlay',\n  props: {\n    as: { type: [Object, String], default: 'div' },\n  },\n  render() {\n    let api = useDialogContext('DialogOverlay')\n    let propsWeControl = {\n      ref: 'el',\n      id: this.id,\n      'aria-hidden': true,\n      onClick: this.handleClick,\n    }\n    let passThroughProps = this.$props\n\n    return render({\n      props: { ...passThroughProps, ...propsWeControl },\n      slot: { open: api.dialogState.value === DialogStates.Open },\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'DialogOverlay',\n    })\n  },\n  setup() {\n    let api = useDialogContext('DialogOverlay')\n    let id = `headlessui-dialog-overlay-${useId()}`\n\n    return {\n      id,\n      handleClick(event: MouseEvent) {\n        if (event.target !== event.currentTarget) return\n        event.preventDefault()\n        event.stopPropagation()\n        api.close()\n      },\n    }\n  },\n})\n\n// ---\n\nexport let DialogTitle = defineComponent({\n  name: 'DialogTitle',\n  props: {\n    as: { type: [Object, String], default: 'h2' },\n  },\n  render() {\n    let api = useDialogContext('DialogTitle')\n    let propsWeControl = { id: this.id }\n    let passThroughProps = this.$props\n\n    return render({\n      props: { ...passThroughProps, ...propsWeControl },\n      slot: { open: api.dialogState.value === DialogStates.Open },\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'DialogTitle',\n    })\n  },\n  setup() {\n    let api = useDialogContext('DialogTitle')\n    let id = `headlessui-dialog-title-${useId()}`\n\n    onMounted(() => {\n      api.setTitleId(id)\n      onUnmounted(() => api.setTitleId(null))\n    })\n\n    return { id }\n  },\n})\n\n// ---\n\nexport let DialogDescription = Description\n"],"names":["DialogStates","DialogContext","Symbol","useDialogContext","component","context","inject","err","Error","captureStackTrace","Missing","Dialog","defineComponent","name","inheritAttrs","props","as","type","Object","String","Boolean","unmount","open","initialFocus","emits","close","_close","render","propsWeControl","$attrs","ref","id","role","dialogState","Open","undefined","titleId","describedby","onClick","handleClick","$props","passThroughProps","slot","h","ForcePortalRoot","force","Portal","PortalGroup","target","dialogRef","attrs","slots","$slots","visible","features","Features","RenderStrategy","Static","setup","emit","containers","Set","usesOpenClosedState","useOpenClosed","computed","match","value","State","Closed","hasOpen","internalDialogRef","enabled","onUpdated","useId","focusTrapOptions","useFocusTrap","useInertOthers","useStackProvider","message","element","StackMessage","AddElement","add","RemoveElement","useDescriptions","api","setTitleId","provide","useWindowEvent","event","size","contains","nextTick","focus","key","Keys","Escape","preventDefault","stopPropagation","watchEffect","onInvalidate","overflow","document","documentElement","style","paddingRight","scrollbarWidth","window","innerWidth","clientWidth","container","dom","observer","IntersectionObserver","entries","entry","boundingClientRect","x","y","width","height","observe","disconnect","el","DialogOverlay","currentTarget","DialogTitle","onMounted","onUnmounted","DialogDescription","Description"],"mappings":"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"}