{"version":3,"file":"description.esm.js","sources":["../../../src/components/description/description.ts"],"sourcesContent":["import {\n  computed,\n  defineComponent,\n  inject,\n  onMounted,\n  onUnmounted,\n  provide,\n  ref,\n  unref,\n\n  // Types\n  ComputedRef,\n  InjectionKey,\n  Ref,\n} from 'vue'\n\nimport { useId } from '../../hooks/use-id'\nimport { render } from '../../utils/render'\n\n// ---\n\nlet DescriptionContext = Symbol('DescriptionContext') as InjectionKey<{\n  register(value: string): () => void\n  slot: Ref<Record<string, any>>\n  name: string\n  props: Record<string, any>\n}>\n\nfunction useDescriptionContext() {\n  let context = inject(DescriptionContext, null)\n  if (context === null) {\n    throw new Error('Missing parent')\n  }\n  return context\n}\n\nexport function useDescriptions({\n  slot = ref({}),\n  name = 'Description',\n  props = {},\n}: {\n  slot?: Ref<Record<string, unknown>>\n  name?: string\n  props?: Record<string, unknown>\n} = {}): ComputedRef<string | undefined> {\n  let descriptionIds = ref<string[]>([])\n\n  function register(value: string) {\n    descriptionIds.value.push(value)\n\n    return () => {\n      let idx = descriptionIds.value.indexOf(value)\n      if (idx === -1) return\n      descriptionIds.value.splice(idx, 1)\n    }\n  }\n\n  provide(DescriptionContext, { register, slot, name, props })\n\n  // The actual id's as string or undefined.\n  return computed(() =>\n    descriptionIds.value.length > 0 ? descriptionIds.value.join(' ') : undefined\n  )\n}\n\n// ---\n\nexport let Description = defineComponent({\n  name: 'Description',\n  props: {\n    as: { type: [Object, String], default: 'p' },\n  },\n  render() {\n    let { name = 'Description', slot = ref({}), props = {} } = this.context\n    let passThroughProps = this.$props\n    let propsWeControl = {\n      ...Object.entries(props).reduce(\n        (acc, [key, value]) => Object.assign(acc, { [key]: unref(value) }),\n        {}\n      ),\n      id: this.id,\n    }\n\n    return render({\n      props: { ...passThroughProps, ...propsWeControl },\n      slot: slot.value,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name,\n    })\n  },\n  setup() {\n    let context = useDescriptionContext()\n    let id = `headlessui-description-${useId()}`\n\n    onMounted(() => onUnmounted(context.register(id)))\n\n    return { id, context }\n  },\n})\n"],"names":["DescriptionContext","Symbol","useDescriptionContext","context","inject","Error","useDescriptions","slot","ref","name","props","descriptionIds","register","value","push","idx","indexOf","splice","provide","computed","length","join","undefined","Description","defineComponent","as","type","Object","String","render","passThroughProps","$props","propsWeControl","entries","reduce","acc","key","assign","unref","id","attrs","$attrs","slots","$slots","setup","useId","onMounted","onUnmounted"],"mappings":"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"}