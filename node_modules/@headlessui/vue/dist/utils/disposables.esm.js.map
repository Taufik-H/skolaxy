{"version":3,"file":"disposables.esm.js","sources":["../../src/utils/disposables.ts"],"sourcesContent":["export function disposables() {\n  let disposables: Function[] = []\n\n  let api = {\n    requestAnimationFrame(...args: Parameters<typeof requestAnimationFrame>) {\n      let raf = requestAnimationFrame(...args)\n      api.add(() => cancelAnimationFrame(raf))\n    },\n\n    nextFrame(...args: Parameters<typeof requestAnimationFrame>) {\n      api.requestAnimationFrame(() => {\n        api.requestAnimationFrame(...args)\n      })\n    },\n\n    setTimeout(...args: Parameters<typeof setTimeout>) {\n      let timer = setTimeout(...args)\n      api.add(() => clearTimeout(timer))\n    },\n\n    add(cb: () => void) {\n      disposables.push(cb)\n    },\n\n    dispose() {\n      for (let dispose of disposables.splice(0)) {\n        dispose()\n      }\n    },\n  }\n\n  return api\n}\n"],"names":["disposables","api","requestAnimationFrame","raf","add","cancelAnimationFrame","nextFrame","args","setTimeout","timer","clearTimeout","cb","push","dispose","splice"],"mappings":";;SAAgBA;AACd,MAAIA,WAAW,GAAe,EAA9B;AAEA,MAAIC,GAAG,GAAG;AACRC,IAAAA,qBADQ;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAEN,UAAIC,GAAG,GAAGD,qBAAqB,MAArB,mBAAV;AACAD,MAAAA,GAAG,CAACG,GAAJ,CAAQ;AAAA,eAAMC,oBAAoB,CAACF,GAAD,CAA1B;AAAA,OAAR;AACD,KAJO;AAMRG,IAAAA,SANQ;wCAMKC;AAAAA,QAAAA;;;AACXN,MAAAA,GAAG,CAACC,qBAAJ,CAA0B;AACxBD,QAAAA,GAAG,CAACC,qBAAJ,OAAAD,GAAG,EAA0BM,IAA1B,CAAH;AACD,OAFD;AAGD,KAVO;AAYRC,IAAAA,UAZQ;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAaN,UAAIC,KAAK,GAAGD,UAAU,MAAV,mBAAZ;AACAP,MAAAA,GAAG,CAACG,GAAJ,CAAQ;AAAA,eAAMM,YAAY,CAACD,KAAD,CAAlB;AAAA,OAAR;AACD,KAfO;AAiBRL,IAAAA,GAjBQ,eAiBJO,EAjBI;AAkBNX,MAAAA,WAAW,CAACY,IAAZ,CAAiBD,EAAjB;AACD,KAnBO;AAqBRE,IAAAA,OArBQ;AAsBN,2DAAoBb,WAAW,CAACc,MAAZ,CAAmB,CAAnB,CAApB,wCAA2C;AAAA,YAAlCD,OAAkC;AACzCA,QAAAA,OAAO;AACR;AACF;AAzBO,GAAV;AA4BA,SAAOZ,GAAP;AACD;;;;"}